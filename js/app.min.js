function addProductToCart(e,t){e.preventDefault();var r=$("div[data-product-id="+t+"]"),a=r.find(".product-img"),n=a.find("img");isCartFull()?$("#modalError").modal():(updateSummaryWithImage(n.attr("src"),getNextImageId()),cart.push({productId:t,src:n.attr("src")}),fireEventChanges())}function removeProductFromCart(e,t){e.preventDefault(),console.log("remove index "+t),cart.splice(t-1,1),rebuildSummaryItems(),fireEventChanges()}function rebuildSummaryItems(){for(i=1;7>i;i++)console.log("clearing item "+i),updateSummaryWithImage("",i);for(i=1;i<=cart.length;i++)console.log("adding item "+i),updateSummaryWithImage(cart[i-1].src,i)}function updateSummaryWithImage(e,t){var r=$(".item-"+t);r.addClass("selected");var a=r.find(".summary-item-img");""==e?(r.find(".summary-item-img").empty(),r.removeClass("selected")):a.html("<img onclick='removeProductFromCart(event,"+t+")' src='"+e+"'>")}function updateProgressIndicatorsAndPrice(){updateProgressIndicators(),updatePrice()}function updateProgressIndicators(){areWeAtThree()?$(".summary-progress-3").addClass("complete"):$(".summary-progress-3").removeClass("complete"),areWeAtSix()?$(".summary-progress-6").addClass("complete"):$(".summary-progress-6").removeClass("complete")}function updatePrice(){$(".set-price").html("Price: &pound;"+getPrice())}function getPrice(){return cart.length<3?0:cart.length<6?23:40}function fireEventChanges(){updateProgressIndicatorsAndPrice()}function getNextImageId(){return getNumberOfItemsInCart()+1}function isCartFull(){return cart.length>5}function isCartEmpty(){return cart.length-0}function getNumberOfItemsInCart(){return console.log("number of items in cart"+cart.length),cart.length}function areWeAtThree(){return cart.length>=3}function areWeAtSix(){return 6==cart.length}function bollox(){$(window).scrollTo($("progress-box"),300,{axis:"y"})}$(function(){function e(){return"ontouchstart"in window||"onmsgesturechange"in window}e()?$("html").addClass("touch"):$("html").addClass("non-touch"),$(window).load(function(){$("#loader").fadeOut(),$("#overlay").delay(800).fadeOut("slow")}),//!! start of app scripts !!//
$('a[data-toggle="tab"]').on("shown.bs.tab",function(){var e=this.href.split("#");$(".nav a").filter('[href="#'+e[1]+'"]').tab("show")}),$(".partner-item a").click(function(e){$(".partner-item a").removeClass("selected"),$(this).addClass("selected"),e.preventDefault()}),$(".more-info-trigger a").click(function(e){$(this).hasClass("active")?($(this).removeClass("active"),$(".more-info-content").hide(),e.preventDefault()):($(".more-info-trigger a").removeClass("active"),$(".more-info-content").hide(),$(this).addClass("active"),$(this).parent().next(".more-info-content").show(),e.preventDefault())}),$("ul.category-list a").bind("click",function(e){$anchor=$(this).attr("href"),$(".product-container").stop().scrollTo($anchor,1e3,{axis:"x"}),e.preventDefault()}),$.each(["category-itemlist"],function(e,t){var r=$("."+t);r.each(function(){new Waypoint({element:this,handler:function(e){if("right"===e){var t=$("ul.category-list");r.removeClass("current"),t.find("a").removeClass("active"),$(this.element).addClass("current"),t.find('a[href="#'+$(this.element).attr("id")+'"]').addClass("active")}},offset:1,group:t,context:$(".product-container"),horizontal:!0})})}),$.each(["category-itemlist"],function(e,t){var r=$("."+t);r.each(function(){new Waypoint({element:this,handler:function(e){if("left"===e){var t=$("ul.category-list");r.removeClass("current"),t.find("a").removeClass("active"),$(this.element).addClass("current"),t.find('a[href="#'+$(this.element).attr("id")+'"]').addClass("active")}},offset:"right-in-view",group:t,context:$(".product-container"),horizontal:!0})})})});var cart=new Array;